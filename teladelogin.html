<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <!-- Meta Tags Essenciais -->
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="robots" content="index, follow">
  <meta name="language" content="pt-BR">
  
  <!-- SEO Meta Tags -->
  <title>Booktor - Login | Plataforma de eBooks e Comunidade Literária</title>
  <meta name="description" content="Faça login na Booktor, sua plataforma completa de eBooks gratuitos. Acesse nossa comunidade literária, chat global e biblioteca digital exclusiva.">
  <meta name="keywords" content="login, ebooks, livros digitais, literatura, comunidade literária, booktor, leitura online">
  <meta name="author" content="Equipe Booktor">
  
  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://booktor.github.io/teladelogin.html">
  <meta property="og:title" content="Booktor - Login | Plataforma de eBooks">
  <meta property="og:description" content="Acesse a Booktor e descubra uma biblioteca digital com eBooks gratuitos e uma comunidade apaixonada por literatura.">
  <meta property="og:image" content="https://booktor.github.io/assets/booktor-logo.png">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:locale" content="pt_BR">
  <meta property="og:site_name" content="Booktor">
  
  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:url" content="https://booktor.github.io/teladelogin.html">
  <meta property="twitter:title" content="Booktor - Login | Plataforma de eBooks">
  <meta property="twitter:description" content="Acesse a Booktor e descubra uma biblioteca digital com eBooks gratuitos e uma comunidade apaixonada por literatura.">
  <meta property="twitter:image" content="https://booktor.github.io/assets/booktor-logo.png">
  
  <!-- Security Headers -->
  <meta http-equiv="X-Content-Type-Options" content="nosniff">
  <meta http-equiv="X-Frame-Options" content="DENY">
  <meta http-equiv="X-XSS-Protection" content="1; mode=block">
  <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin">
  
  <!-- Favicon -->
  <link rel="icon" href="https://cdn-icons-png.flaticon.com/512/29/29302.png" type="image/png">
  <link rel="apple-touch-icon" href="https://cdn-icons-png.flaticon.com/512/29/29302.png">
  
  <!-- Preconnect for Performance -->
  <link rel="preconnect" href="https://www.gstatic.com">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  
  <!-- Structured Data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebPage",
    "name": "Booktor - Login",
    "description": "Página de login da plataforma Booktor de eBooks gratuitos",
    "url": "https://booktor.github.io/teladelogin.html",
    "isPartOf": {
      "@type": "WebSite",
      "name": "Booktor",
      "url": "https://booktor.github.io/"
    },
    "potentialAction": {
      "@type": "LoginAction",
      "target": "https://booktor.github.io/teladelogin.html"
    }
  }
  </script>

  <style>
    /* Reset e Base */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #f00000 0%, darkred 100%);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 1rem;
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    body.loaded {
      opacity: 1;
    }

    /* Screen Reader Only */
    .sr-only {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0, 0, 0, 0);
      white-space: nowrap;
      border: 0;
    }

    /* Loading */
    .loading {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: #f00;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
    }

    .loading.show {
      opacity: 1;
      visibility: visible;
    }

    .loading-spinner {
      width: 50px;
      height: 50px;
      border: 4px solid rgba(255, 255, 255, 0.3);
      border-top: 4px solid white;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    /* Particles */
    .particles {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 1;
    }

    .particle {
      position: absolute;
      width: 4px;
      height: 4px;
      background: white;
      opacity: 70%;
      border-radius: 50%;
      animation: float 6s ease-in-out infinite;
    }

    @keyframes float {
      0%, 100% { transform: translateY(0px) rotate(0deg); opacity: 0; }
      50% { transform: translateY(-20px) rotate(180deg); opacity: 1; }
    }

    /* Container Principal */
    .container {
      background: black;
      backdrop-filter: blur(10px);
      border-radius: 20px;
      padding: 2rem;
      width: 100%;
      max-width: 400px;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
      position: relative;
      z-index: 2;
      visibility: hidden;
    }

    .container.visible {
      visibility: visible;
    }

    /* Logo */
    .logo {
      text-align: center;
      margin-bottom: 2rem;
    }

    .logo h1 {
      font-size: 2rem;
      color: white;
      margin-bottom: 0.5rem;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
    }

    .logo-icon {
      width: 32px;
      height: 32px;
      fill: red;
    }

    .logo p {
      color: white;
      font-size: 0.9rem;
    }

    /* Tabs */
    .tabs {
      display: flex;
      margin-bottom: 2rem;
      background: #666;
      border-radius: 10px;
      padding: 4px;
    }

    .tab {
      flex: 1;
      padding: 0.75rem;
      border: none;
      background: transparent;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 500;
      color: white;
      transition: all 0.3s ease;
    }

    .tab.active {
      background: white;
      color: #f00;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .tab:hover:not(.active) {
      color: #333;
    }

    .tab:focus {
      outline: 2px solid #f00;
      outline-offset: 2px;
    }

    /* Forms */
    .form-container {
      transition: all 0.3s ease;
    }

    .form-container.hidden {
      display: none;
    }

    .form-group {
      margin-bottom: 1.5rem;
      position: relative;
    }

    .form-group label {
      display: block;
      margin-bottom: 0.5rem;
      color: white;
      font-weight: 500;
    }

    .form-input {
      width: 100%;
      padding: 0.75rem;
      border: 2px solid #f00000;
      border-radius: 8px;
      font-size: 1rem;
      transition: all 0.3s ease;
      background: white;
    }

    .form-input:focus {
      outline: none;
      border-color: #f00000;
      box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
    }

    .form-input[aria-invalid="true"] {
      border-color: #dc3545;
    }

    .password-toggle {
      position: absolute;
      right: 0.75rem;
      top: 50%;
      transform: translateY(-50%);
      background: none;
      border: none;
      cursor: pointer;
      padding: 0.25rem;
      border-radius: 4px;
      transition: background-color 0.2s ease;
    }

    .password-toggle:hover {
      background-color: rgba(0, 0, 0, 0.05);
    }

    .password-toggle:focus {
      outline: 2px solid #f00000;
      outline-offset: 2px;
    }

    .password-toggle svg {
      width: 20px;
      height: 20px;
      fill: #666;
    }

    /* Error Messages */
    .error-message {
      color: #dc3545;
      font-size: 0.875rem;
      margin-top: 0.25rem;
    }

    .error-message:not(.sr-only) {
      display: block;
    }

    /* Buttons */
    .btn {
      width: 100%;
      padding: 0.875rem;
      background: linear-gradient(135deg, #f00 0%, darkred 100%);
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      margin-bottom: 1rem;
    }

    .btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
    }

    .btn:focus {
      outline: 2px solid #667eea;
      outline-offset: 2px;
    }

    .btn:active {
      transform: translateY(0);
    }

    .google-btn {
      width: 100%;
      padding: 0.875rem;
      background: white;
      color: #333;
      border: 2px solid #e1e5e9;
      border-radius: 8px;
      font-size: 1rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      margin-bottom: 1rem;
    }

    .google-btn:hover {
      border-color: #ccc;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    .google-btn:focus {
      outline: 2px solid #667eea;
      outline-offset: 2px;
    }

    /* Divider */
    .divider {
      text-align: center;
      margin: 1.5rem 0;
      position: relative;
      color: #ffff;
    }

    .divider::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 0;
      right: 0;
      height: 1px;
      background: #ffff;
    }

    .divider span {
      background: black;
      padding: 0 1rem;
      position: relative;
    }

    /* Forgot Password */
    .forgot-password {
      text-align: center;
      margin-top: 1rem;
    }

    .forgot-password a {
      color: #f00000;
      text-decoration: none;
      font-size: 0.9rem;
      transition: color 0.3s ease;
    }

    .forgot-password a:hover {
      color: #f008;
      text-decoration: underline;
    }

    .forgot-password a:focus {
      outline: 2px solid #f00000;
      outline-offset: 2px;
      border-radius: 4px;
    }

    /* Toast */
    .toast {
      position: fixed;
      top: 20px;
      right: 20px;
      padding: 1rem 1.5rem;
      border-radius: 8px;
      color: white;
      font-weight: 500;
      z-index: 10000;
      transform: translateX(100%);
      transition: transform 0.3s ease;
      max-width: 300px;
    }

    .toast.show {
      transform: translateX(0);
    }

    .toast.success {
      background: #28a745;
    }

    .toast.error {
      background: #dc3545;
    }

    .toast.info {
      background: #17a2b8;
    }

    /* Responsividade */
    @media (max-width: 480px) {
      body {
        padding: 0.5rem;
      }

      .container {
        padding: 1.5rem;
        border-radius: 15px;
      }

      .logo h1 {
        font-size: 1.75rem;
      }

      .form-input {
        padding: 0.625rem;
      }

      .btn, .google-btn {
        padding: 0.75rem;
      }

      .toast {
        right: 10px;
        left: 10px;
        max-width: none;
      }
    }

    @media (max-width: 320px) {
      .container {
        padding: 1rem;
      }

      .logo h1 {
        font-size: 1.5rem;
      }
    }

    /* Melhorias de acessibilidade */
    @media (prefers-reduced-motion: reduce) {
      * {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
      }
    }

    /* High contrast mode */
    @media (prefers-contrast: high) {
      .form-input {
        border-width: 3px;
      }
      
      .btn, .google-btn {
        border-width: 3px;
      }
    }
  </style>
</head>

<body>
  <!-- Skip Navigation Link para Acessibilidade -->
  <a href="#main-content" class="sr-only">Pular para o conteúdo principal</a>
  
  <!-- Background Particles -->
  <div class="particles" id="particles" aria-hidden="true"></div>
  
  <!-- Loading State -->
  <div class="loading" id="loading" role="status" aria-label="Carregando">
    <div class="loading-spinner"></div>
    <span class="sr-only">Carregando página de login...</span>
  </div>
  
  <!-- Main Content -->
  <main class="container" id="main-content">
    <!-- Logo Section -->
    <header class="logo">
      <h1 aria-label="Booktor - Plataforma de eBooks">
        <svg class="logo-icon" viewBox="0 0 24 24" aria-hidden="true">
          <path d="M21 5c-1.11-.35-2.33-.5-3.5-.5-1.95 0-4.05.4-5.5 1.5-1.45-1.1-3.55-1.5-5.5-1.5S2.45 4.9 1 6v14.65c0 .25.25.5.5.5.1 0 .15-.05.25-.05C3.1 20.45 5.05 20 6.5 20c1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.3 4.75 1.05.1.05.15.05.25.05.25 0 .5-.25.5-.5V6c-.6-.45-1.25-.75-2-1zm0 13.5c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V8c1.35-.85 3.8-1.5 5.5-1.5 1.2 0 2.4.15 3.5.5v11.5z"/>
        </svg>
        Booktor
      </h1>
      <p>Sistema de Gerenciamento de Usuários</p>
    </header>
    
    <!-- Tab Navigation -->
    <nav class="tabs" role="tablist" aria-label="Opções de autenticação">
      <button 
        class="tab active"
        data-tab="login"
        role="tab"
        aria-selected="true"
        aria-controls="loginForm"
        id="tab-login"
        tabindex="0"
      >
        Entrar
      </button>
      <button 
        class="tab"
        data-tab="register"
        role="tab"
        aria-selected="false"
        aria-controls="registerForm"
        id="tab-register"
        tabindex="-1"
      >
        Registrar
      </button>
    </nav>
    
    <!-- Login Form -->
    <section 
      id="loginForm"
      class="form-container"
      role="tabpanel"
      aria-labelledby="tab-login"
      aria-hidden="false"
    >
      <form novalidate aria-label="Formulário de login">
        <div class="form-group">
          <label for="loginEmail">Email:</label>
          <input 
            type="email"
            id="loginEmail"
            class="form-input"
            placeholder="seu@email.com"
            required
            autocomplete="email"
            aria-describedby="email-error"
            aria-invalid="false"
          >
          <div id="email-error" class="error-message sr-only" role="alert"></div>
        </div>
        
        <div class="form-group">
          <label for="loginPassword">Senha:</label>
          <div style="position: relative;">
            <input 
              type="password"
              id="loginPassword"
              class="form-input"
              placeholder="Sua senha"
              required
              autocomplete="current-password"
              aria-describedby="password-error password-help"
              aria-invalid="false"
              style="padding-right: 3rem;"
            >
            <button 
              type="button"
              class="password-toggle"
              onclick="togglePassword('loginPassword')"
              aria-label="Mostrar/Ocultar senha"
              title="Clique para mostrar ou ocultar a senha"
            >
              <svg viewBox="0 0 24 24" aria-hidden="true">
                <path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/>
              </svg>
            </button>
          </div>
          <div id="password-error" class="error-message sr-only" role="alert"></div>
          <div id="password-help" class="sr-only">Sua senha deve ter pelo menos 6 caracteres</div>
        </div>
        
        <button 
          type="button"
          class="btn" 
          id="loginBtn"
          aria-describedby="login-status"
        >
          Entrar
        </button>
        <div id="login-status" class="sr-only" role="status" aria-live="polite"></div>
      </form>
      
      <div class="divider" aria-hidden="true">
        <span>ou</span>
      </div>
      
      <button 
        class="google-btn"
        id="googleLoginBtn"
        aria-label="Entrar com conta do Google"
      >
        <svg width="20" height="20" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
          <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
          <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
          <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
          <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
        </svg>
        Entrar com Google
      </button>
      
      <div class="forgot-password">
        <a 
          href="#"
          id="forgotPasswordLink"
          aria-label="Recuperar senha esquecida"
        >
          Esqueceu sua senha?
        </a>
      </div>
    </section>
    
    <!-- Register Form -->
    <section 
      id="registerForm"
      class="form-container hidden"
      role="tabpanel"
      aria-labelledby="tab-register"
      aria-hidden="true"
    >
      <form novalidate aria-label="Formulário de registro">
        <div class="form-group">
          <label for="registerName">Nome completo:</label>
          <input 
            type="text"
            id="registerName"
            class="form-input"
            placeholder="Seu nome completo"
            required
            autocomplete="name"
            aria-describedby="name-error"
            aria-invalid="false"
            minlength="2"
          >
          <div id="name-error" class="error-message sr-only" role="alert"></div>
        </div>
        
        <div class="form-group">
          <label for="registerEmail">Email:</label>
          <input 
            type="email"
            id="registerEmail"
            class="form-input"
            placeholder="seu@email.com"
            required
            autocomplete="email"
            aria-describedby="register-email-error"
            aria-invalid="false"
          >
          <div id="register-email-error" class="error-message sr-only" role="alert"></div>
        </div>
        
        <div class="form-group">
          <label for="registerPassword">Senha:</label>
          <div style="position: relative;">
            <input 
              type="password"
              id="registerPassword"
              class="form-input"
              placeholder="Mínimo 6 caracteres"
              required
              autocomplete="new-password"
              aria-describedby="register-password-error register-password-help"
              aria-invalid="false"
              minlength="6"
              style="padding-right: 3rem;"
            >
            <button 
              type="button"
              class="password-toggle"
              onclick="togglePassword('registerPassword')"
              aria-label="Mostrar/Ocultar senha"
              title="Clique para mostrar ou ocultar a senha"
            >
              <svg viewBox="0 0 24 24" aria-hidden="true">
                <path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/>
              </svg>
            </button>
          </div>
          <div id="register-password-error" class="error-message sr-only" role="alert"></div>
          <div id="register-password-help" class="sr-only">A senha deve ter pelo menos 6 caracteres</div>
        </div>
        
        <div class="form-group">
          <label for="confirmPassword">Confirmar Senha:</label>
          <div style="position: relative;">
            <input 
              type="password"
              id="confirmPassword"
              class="form-input"
              placeholder="Confirme sua senha"
              required
              autocomplete="new-password"
              aria-describedby="confirm-password-error"
              aria-invalid="false"
              style="padding-right: 3rem;"
            >
            <button 
              type="button"
              class="password-toggle"
              onclick="togglePassword('confirmPassword')"
              aria-label="Mostrar/Ocultar confirmação de senha"
              title="Clique para mostrar ou ocultar a confirmação da senha"
            >
              <svg viewBox="0 0 24 24" aria-hidden="true">
                <path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/>
              </svg>
            </button>
          </div>
          <div id="confirm-password-error" class="error-message sr-only" role="alert"></div>
        </div>
        
        <button 
          type="button"
          class="btn" 
          id="registerBtn"
          aria-describedby="register-status"
        >
          Registrar
        </button>
        <div id="register-status" class="sr-only" role="status" aria-live="polite"></div>
      </form>
      
      <div class="divider" aria-hidden="true">
        <span>ou</span>
      </div>
      
      <button 
        class="google-btn"
        id="googleRegisterBtn"
        aria-label="Registrar com conta do Google"
      >
        <svg width="20" height="20" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
          <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
          <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
          <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
          <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
        </svg>
        Registrar com Google
      </button>
    </section>
    
    <!-- Reset Password Form -->
    <section 
      id="resetPasswordForm"
      class="form-container hidden"
      role="form"
      aria-label="Formulário de recuperação de senha"
    >
      <form novalidate>
        <div class="form-group">
          <label for="resetEmail">Email para recuperação:</label>
          <input 
            type="email"
            id="resetEmail"
            class="form-input"
            placeholder="seu@email.com"
            required
            autocomplete="email"
            aria-describedby="reset-email-error reset-email-help"
            aria-invalid="false"
          >
          <div id="reset-email-error" class="error-message sr-only" role="alert"></div>
          <div id="reset-email-help" class="sr-only">Enviaremos um link para redefinir sua senha</div>
        </div>
        
        <button 
          type="button"
          class="btn" 
          id="resetBtn"
          aria-describedby="reset-status"
        >
          Enviar Link de Recuperação
        </button>
        <div id="reset-status" class="sr-only" role="status" aria-live="polite"></div>
      </form>
      
      <div class="forgot-password">
        <a 
          href="#"
          id="backToLoginLink"
          aria-label="Voltar para a página de login"
        >
          Voltar ao Login
        </a>
      </div>
    </section>
  </main>
  
  <!-- JavaScript -->
  <script type="module" defer>
    // Firebase Configuration
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import {
      getAuth,
      signInWithEmailAndPassword,
      createUserWithEmailAndPassword,
      signInWithPopup,
      GoogleAuthProvider,
      sendPasswordResetEmail,
      updateProfile,
      onAuthStateChanged
    } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
    import {
      getDatabase,
      ref,
      set,
      serverTimestamp
    } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js";

    // Firebase Configuration
    const firebaseConfig = {
      apiKey: "AIzaSyBauGgt1pm-sBas75N40ufWRsGD6c4BsgM",
      authDomain: "sistema-de-login-blog.firebaseapp.com",
      databaseURL: "https://sistema-de-login-blog-default-rtdb.firebaseio.com",
      projectId: "sistema-de-login-blog",
      storageBucket: "sistema-de-login-blog.firebasestorage.app",
      messagingSenderId: "416120877008",
      appId: "1:416120877008:web:a5b0a26bec246d577a93d5"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const database = getDatabase(app);
    const provider = new GoogleAuthProvider();

    // DOM Elements
    const elements = {
      loading: document.getElementById('loading'),
      container: document.querySelector('.container'),
      tabs: document.querySelectorAll('.tab'),
      forms: {
        login: document.getElementById('loginForm'),
        register: document.getElementById('registerForm'),
        reset: document.getElementById('resetPasswordForm')
      },
      buttons: {
        login: document.getElementById('loginBtn'),
        register: document.getElementById('registerBtn'),
        reset: document.getElementById('resetBtn'),
        googleLogin: document.getElementById('googleLoginBtn'),
        googleRegister: document.getElementById('googleRegisterBtn'),
        forgotPassword: document.getElementById('forgotPasswordLink'),
        backToLogin: document.getElementById('backToLoginLink')
      },
      inputs: {
        loginEmail: document.getElementById('loginEmail'),
        loginPassword: document.getElementById('loginPassword'),
        registerName: document.getElementById('registerName'),
        registerEmail: document.getElementById('registerEmail'),
        registerPassword: document.getElementById('registerPassword'),
        confirmPassword: document.getElementById('confirmPassword'),
        resetEmail: document.getElementById('resetEmail')
      }
    };

    // Utility Functions
    function showLoading() {
      elements.loading.classList.add('show');
      elements.loading.setAttribute('aria-hidden', 'false');
    }

    function hideLoading() {
      elements.loading.classList.remove('show');
      elements.loading.setAttribute('aria-hidden', 'true');
    }

    function showToast(message, type = 'info') {
      const toast = document.createElement('div');
      toast.className = `toast ${type}`;
      toast.textContent = message;
      toast.setAttribute('role', 'alert');
      toast.setAttribute('aria-live', 'assertive');
      document.body.appendChild(toast);
      
      setTimeout(() => toast.classList.add('show'), 100);
      
      setTimeout(() => {
        toast.classList.remove('show');
        setTimeout(() => toast.remove(), 300);
      }, 4000);
    }

    function validateEmail(email) {
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      return emailRegex.test(email);
    }

    function validatePassword(password) {
      return password.length >= 6;
    }

    function showError(inputElement, message) {
      const errorId = inputElement.getAttribute('aria-describedby')?.split(' ')[0];
      const errorElement = errorId ? document.getElementById(errorId) : null;
      if (errorElement) {
        errorElement.textContent = message;
        errorElement.classList.remove('sr-only');
        inputElement.setAttribute('aria-invalid', 'true');
      }
    }

    function clearError(inputElement) {
      const errorId = inputElement.getAttribute('aria-describedby')?.split(' ')[0];
      const errorElement = errorId ? document.getElementById(errorId) : null;
      if (errorElement) {
        errorElement.textContent = '';
        errorElement.classList.add('sr-only');
        inputElement.setAttribute('aria-invalid', 'false');
      }
    }

    // Password Toggle Function
    window.togglePassword = function(inputId) {
      const input = document.getElementById(inputId);
      const button = input.parentElement.querySelector('.password-toggle');
      const svg = button.querySelector('svg path');
      
      if (input.type === 'password') {
        input.type = 'text';
        button.setAttribute('aria-label', 'Ocultar senha');
        // SVG para olho fechado
        svg.setAttribute('d', 'M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78l3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z');
      } else {
        input.type = 'password';
        button.setAttribute('aria-label', 'Mostrar senha');
        // SVG para olho aberto
        svg.setAttribute('d', 'M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z');
      }
    };

    // Tab Navigation
    function switchTab(tabName) {
      elements.tabs.forEach(tab => {
        tab.classList.remove('active');
        tab.setAttribute('aria-selected', 'false');
        tab.setAttribute('tabindex', '-1');
      });
      
      Object.values(elements.forms).forEach(form => {
        form.classList.add('hidden');
        form.setAttribute('aria-hidden', 'true');
      });

      const activeTab = document.querySelector(`[data-tab="${tabName}"]`);
      const activeForm = elements.forms[tabName];
      
      if (activeTab && activeForm) {
        activeTab.classList.add('active');
        activeTab.setAttribute('aria-selected', 'true');
        activeTab.setAttribute('tabindex', '0');
        activeForm.classList.remove('hidden');
        activeForm.setAttribute('aria-hidden', 'false');
      }
    }

    // Event Listeners
    elements.tabs.forEach(tab => {
      tab.addEventListener('click', (e) => switchTab(e.target.dataset.tab));
      tab.addEventListener('keydown', (e) => {
        if (e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          switchTab(e.target.dataset.tab);
        }
      });
    });

    // Login Function
    elements.buttons.login.addEventListener('click', async () => {
      const email = elements.inputs.loginEmail.value.trim();
      const password = elements.inputs.loginPassword.value;

      // Clear previous errors
      clearError(elements.inputs.loginEmail);
      clearError(elements.inputs.loginPassword);

      // Validation
      if (!email) {
        showError(elements.inputs.loginEmail, 'Email é obrigatório');
        elements.inputs.loginEmail.focus();
        return;
      }

      if (!validateEmail(email)) {
        showError(elements.inputs.loginEmail, 'Email inválido');
        elements.inputs.loginEmail.focus();
        return;
      }

      if (!password) {
        showError(elements.inputs.loginPassword, 'Senha é obrigatória');
        elements.inputs.loginPassword.focus();
        return;
      }

      showLoading();
      try {
        const userCredential = await signInWithEmailAndPassword(auth, email, password);
        showToast('Login realizado com sucesso!', 'success');
        
        // Update status for screen readers
        document.getElementById('login-status').textContent = 'Login realizado com sucesso';
        
        setTimeout(() => {
          window.location.href = 'inicio.html';
        }, 1500);
      } catch (error) {
        hideLoading();
        console.error('Erro no login:', error);
        
        let errorMessage = 'Erro no login. Tente novamente.';
        if (error.code === 'auth/user-not-found') {
          errorMessage = 'Usuário não encontrado';
        } else if (error.code === 'auth/wrong-password') {
          errorMessage = 'Senha incorreta';
        } else if (error.code === 'auth/invalid-email') {
          errorMessage = 'Email inválido';
        } else if (error.code === 'auth/user-disabled') {
          errorMessage = 'Conta desabilitada';
        }
        
        showToast(errorMessage, 'error');
        document.getElementById('login-status').textContent = errorMessage;
      }
    });

    // Register Function
    elements.buttons.register.addEventListener('click', async () => {
      const name = elements.inputs.registerName.value.trim();
      const email = elements.inputs.registerEmail.value.trim();
      const password = elements.inputs.registerPassword.value;
      const confirmPassword = elements.inputs.confirmPassword.value;

      // Clear previous errors
      clearError(elements.inputs.registerName);
      clearError(elements.inputs.registerEmail);
      clearError(elements.inputs.registerPassword);
      clearError(elements.inputs.confirmPassword);

      // Validation
      if (!name) {
        showError(elements.inputs.registerName, 'Nome é obrigatório');
        elements.inputs.registerName.focus();
        return;
      }

      if (name.length < 2) {
        showError(elements.inputs.registerName, 'Nome deve ter pelo menos 2 caracteres');
        elements.inputs.registerName.focus();
        return;
      }

      if (!email) {
        showError(elements.inputs.registerEmail, 'Email é obrigatório');
        elements.inputs.registerEmail.focus();
        return;
      }

      if (!validateEmail(email)) {
        showError(elements.inputs.registerEmail, 'Email inválido');
        elements.inputs.registerEmail.focus();
        return;
      }

      if (!password) {
        showError(elements.inputs.registerPassword, 'Senha é obrigatória');
        elements.inputs.registerPassword.focus();
        return;
      }

      if (!validatePassword(password)) {
        showError(elements.inputs.registerPassword, 'Senha deve ter pelo menos 6 caracteres');
        elements.inputs.registerPassword.focus();
        return;
      }

      if (password !== confirmPassword) {
        showError(elements.inputs.confirmPassword, 'Senhas não coincidem');
        elements.inputs.confirmPassword.focus();
        return;
      }

      showLoading();
      try {
        const userCredential = await createUserWithEmailAndPassword(auth, email, password);
        await updateProfile(userCredential.user, { displayName: name });
        
        // Save user data to database
        await set(ref(database, `users/${userCredential.user.uid}`), {
          uid: userCredential.user.uid,
          displayName: name,
          email: email,
          createdAt: serverTimestamp()
        });

        showToast('Conta criada com sucesso!', 'success');
        document.getElementById('register-status').textContent = 'Conta criada com sucesso';
        
        setTimeout(() => {
          window.location.href = 'inicio.html';
        }, 1500);
      } catch (error) {
        hideLoading();
        console.error('Erro no registro:', error);
        
        let errorMessage = 'Erro ao criar conta. Tente novamente.';
        if (error.code === 'auth/email-already-in-use') {
          errorMessage = 'Email já está em uso';
        } else if (error.code === 'auth/weak-password') {
          errorMessage = 'Senha muito fraca';
        } else if (error.code === 'auth/invalid-email') {
          errorMessage = 'Email inválido';
        }
        
        showToast(errorMessage, 'error');
        document.getElementById('register-status').textContent = errorMessage;
      }
    });

    // Google Auth
    [elements.buttons.googleLogin, elements.buttons.googleRegister].forEach(btn => {
      btn.addEventListener('click', async () => {
        showLoading();
        try {
          const result = await signInWithPopup(auth, provider);
          
          await set(ref(database, `users/${result.user.uid}`), {
            uid: result.user.uid,
            displayName: result.user.displayName,
            email: result.user.email,
            photoURL: result.user.photoURL,
            lastLogin: serverTimestamp()
          });

          showToast('Login com Google realizado com sucesso!', 'success');
          
          setTimeout(() => {
            window.location.href = 'inicio.html';
          }, 1500);
        } catch (error) {
          hideLoading();
          console.error('Erro no login com Google:', error);
          showToast('Erro no login com Google. Tente novamente.', 'error');
        }
      });
    });

    // Password Reset
    elements.buttons.reset.addEventListener('click', async () => {
      const email = elements.inputs.resetEmail.value.trim();
      clearError(elements.inputs.resetEmail);

      if (!email) {
        showError(elements.inputs.resetEmail, 'Email é obrigatório');
        elements.inputs.resetEmail.focus();
        return;
      }

      if (!validateEmail(email)) {
        showError(elements.inputs.resetEmail, 'Email inválido');
        elements.inputs.resetEmail.focus();
        return;
      }

      showLoading();
      try {
        await sendPasswordResetEmail(auth, email);
        hideLoading();
        showToast('Link de recuperação enviado!', 'success');
        document.getElementById('reset-status').textContent = 'Link de recuperação enviado para seu email';
        
        setTimeout(() => switchTab('login'), 2000);
      } catch (error) {
        hideLoading();
        console.error('Erro ao enviar email de recuperação:', error);
        
        let errorMessage = 'Erro ao enviar email. Verifique o endereço.';
        if (error.code === 'auth/user-not-found') {
          errorMessage = 'Email não encontrado';
        }
        
        showToast(errorMessage, 'error');
        document.getElementById('reset-status').textContent = 'Erro ao enviar email de recuperação';
      }
    });

    // Forgot Password Link
    elements.buttons.forgotPassword.addEventListener('click', (e) => {
      e.preventDefault();
      switchTab('reset');
    });

    // Back to Login Link
    elements.buttons.backToLogin.addEventListener('click', (e) => {
      e.preventDefault();
      switchTab('login');
    });

    // Create Particles
    function createParticles() {
      const particlesContainer = document.getElementById('particles');
      const particleCount = window.innerWidth < 768 ? 20 : 40;
      
      particlesContainer.innerHTML = '';
      
      for (let i = 0; i < particleCount; i++) {
        const particle = document.createElement('div');
        particle.className = 'particle';
        particle.style.left = Math.random() * 100 + '%';
        particle.style.top = Math.random() * 100 + '%';
        particle.style.animationDelay = Math.random() * 6 + 's';
        particle.style.animationDuration = (Math.random() * 3 + 3) + 's';
        particlesContainer.appendChild(particle);
      }
    }

    // Auth State Observer
    onAuthStateChanged(auth, (user) => {
      if (user) {
        console.log('Usuário já autenticado, redirecionando...');
        window.location.href = 'inicio.html';
      }
    });

    // Initialize
    function initialize() {
      hideLoading();
      createParticles();
      
      // Show content after initialization
      document.body.classList.add('loaded');
      elements.container.classList.add('visible');
    }

    // Handle window resize for particles
    window.addEventListener('resize', createParticles);

    // Form submission handling with Enter key
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Enter') {
        const activeForm = document.querySelector('.form-container:not(.hidden)');
        if (activeForm) {
          const submitBtn = activeForm.querySelector('.btn');
          if (submitBtn) {
            e.preventDefault();
            submitBtn.click();
          }
        }
      }
    });

    // Initialize when DOM is ready
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', initialize);
    } else {
      initialize();
    }
  </script>
</body>
  </html>
