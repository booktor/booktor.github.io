<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <!-- Meta Tags Essenciais -->
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="robots" content="index, follow">
  <meta name="language" content="pt-BR">
  
  <!-- SEO Meta Tags -->
  <title>Booktor - Login | Plataforma de eBooks e Comunidade Liter√°ria</title>
  <meta name="description" content="Fa√ßa login na Booktor, sua plataforma completa de eBooks gratuitos. Acesse nossa comunidade liter√°ria, chat global e biblioteca digital exclusiva.">
  <meta name="keywords" content="login, ebooks, livros digitais, literatura, comunidade liter√°ria, booktor, leitura online">
  <meta name="author" content="Al√≠rio Neto">
  
  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://booktor.github.io/teladelogin.html">
  <meta property="og:title" content="Booktor - Login | Plataforma de eBooks">
  <meta property="og:description" content="Acesse a Booktor e descubra uma biblioteca digital com eBooks gratuitos e uma comunidade apaixonada por literatura.">
  <meta property="og:image" content="https://booktor.github.io/assets/booktor-logo.png">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:locale" content="pt_BR">
  <meta property="og:site_name" content="Booktor">

  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:url" content="https://booktor.github.io/teladelogin.html">
  <meta property="twitter:title" content="Booktor - Login | Plataforma de eBooks">
  <meta property="twitter:description" content="Acesse a Booktor e descubra uma biblioteca digital com eBooks gratuitos e uma comunidade apaixonada por literatura.">
  <meta property="twitter:image" content="https://booktor.github.io/assets/booktor-logo.png">

  <!-- Security Headers -->
  <meta http-equiv="X-Content-Type-Options" content="nosniff">
  <meta http-equiv="X-Frame-Options" content="DENY">
  <meta http-equiv="X-XSS-Protection" content="1; mode=block">
  <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin">

  <!-- Favicon -->
  <link rel="icon" href="https://cdn-icons-png.flaticon.com/512/29/29302.png" type="image/png">
  <link rel="apple-touch-icon" href="https://cdn-icons-png.flaticon.com/512/29/29302.png">
  
  <!-- Preconnect for Performance -->
  <link rel="preconnect" href="https://www.gstatic.com">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  
  <!-- CSS Externo -->
  <link rel="stylesheet" href="styles/login.css">
  
  <!-- Critical CSS Inline -->
  <style>
    /* Critical CSS para evitar FOUC */
    body { 
      opacity: 0; 
      transition: opacity 0.3s ease;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      margin: 0;
      padding: 0;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .container { 
      visibility: hidden;
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border-radius: 20px;
      padding: 2rem;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
      width: 100%;
      max-width: 400px;
      margin: 1rem;
    }
    
    .logo {
      text-align: center;
      margin-bottom: 2rem;
    }
    
    .logo h1 {
      font-size: 2rem;
      font-weight: 700;
      color: #333;
      margin: 0 0 0.5rem 0;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
    }
    
    .logo p {
      color: #666;
      margin: 0;
      font-size: 0.9rem;
    }
    
    .tabs {
      display: flex;
      background: #f8f9fa;
      border-radius: 12px;
      padding: 4px;
      margin-bottom: 2rem;
    }
    
    .tab {
      flex: 1;
      padding: 0.75rem;
      border: none;
      background: transparent;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 500;
      transition: all 0.3s ease;
      color: #666;
    }
    
    .tab.active {
      background: white;
      color: #333;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }
    
    .form-container {
      transition: all 0.3s ease;
    }
    
    .form-container.hidden {
      display: none;
    }
    
    .form-group {
      margin-bottom: 1.5rem;
    }
    
    .form-group label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: 500;
      color: #333;
    }
    
    .form-input {
      width: 100%;
      padding: 0.75rem;
      border: 2px solid #e9ecef;
      border-radius: 8px;
      font-size: 1rem;
      transition: border-color 0.3s ease;
      box-sizing: border-box;
    }
    
    .form-input:focus {
      outline: none;
      border-color: #667eea;
    }
    
    .password-toggle {
      position: absolute;
      right: 0.75rem;
      top: 50%;
      transform: translateY(-50%);
      background: none;
      border: none;
      cursor: pointer;
      padding: 0.25rem;
      color: #666;
    }
    
    .btn {
      width: 100%;
      padding: 0.875rem;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: transform 0.2s ease;
    }
    
    .btn:hover {
      transform: translateY(-2px);
    }
    
    .google-btn {
      width: 100%;
      padding: 0.875rem;
      background: white;
      border: 2px solid #e9ecef;
      border-radius: 8px;
      font-size: 1rem;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      transition: all 0.3s ease;
      margin-top: 1rem;
    }
    
    .google-btn:hover {
      border-color: #667eea;
    }
    
    .divider {
      text-align: center;
      margin: 1.5rem 0;
      position: relative;
      color: #666;
    }
    
    .divider::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 0;
      right: 0;
      height: 1px;
      background: #e9ecef;
    }
    
    .divider span {
      background: rgba(255, 255, 255, 0.95);
      padding: 0 1rem;
    }
    
    .forgot-password {
      text-align: center;
      margin-top: 1rem;
    }
    
    .forgot-password a {
      color: #667eea;
      text-decoration: none;
      font-size: 0.9rem;
    }
    
    .forgot-password a:hover {
      text-decoration: underline;
    }
    
    .error-message {
      color: #dc3545;
      font-size: 0.875rem;
      margin-top: 0.25rem;
    }
    
    .sr-only {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0, 0, 0, 0);
      white-space: nowrap;
      border: 0;
    }
    
    .loading {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(255, 255, 255, 0.9);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
    }
    
    .loading.show {
      opacity: 1;
      visibility: visible;
    }
    
    .loading-spinner {
      width: 40px;
      height: 40px;
      border: 4px solid #f3f3f3;
      border-top: 4px solid #667eea;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    .particles {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: -1;
    }
    
    .particle {
      position: absolute;
      width: 4px;
      height: 4px;
      background: rgba(255, 255, 255, 0.3);
      border-radius: 50%;
      animation: float 6s ease-in-out infinite;
    }
    
    @keyframes float {
      0%, 100% { transform: translateY(0px) rotate(0deg); }
      50% { transform: translateY(-20px) rotate(180deg); }
    }
    
    .toast {
      position: fixed;
      top: 20px;
      right: 20px;
      padding: 1rem 1.5rem;
      border-radius: 8px;
      color: white;
      font-weight: 500;
      z-index: 10000;
      transform: translateX(100%);
      transition: transform 0.3s ease;
    }
    
    .toast.show {
      transform: translateX(0);
    }
    
    .toast.success {
      background: #28a745;
    }
    
    .toast.error {
      background: #dc3545;
    }
    
    .toast.info {
      background: #17a2b8;
    }
  </style>

  <!-- Structured Data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebPage",
    "name": "Booktor - Login",
    "description": "P√°gina de login da plataforma Booktor de eBooks gratuitos",
    "url": "https://booktor.github.io/teladelogin.html",
    "isPartOf": {
      "@type": "WebSite",
      "name": "Booktor",
      "url": "https://booktor.github.io/"
    },
    "potentialAction": {
      "@type": "LoginAction",
      "target": "https://booktor.github.io/teladelogin.html"
    }
  }
  </script>
</head>

<body>
  <!-- Skip Navigation Link para Acessibilidade -->
  <a href="#main-content" class="sr-only">Pular para o conte√∫do principal</a>
  
  <!-- Background Particles -->
  <div class="particles" id="particles" aria-hidden="true"></div>

  <!-- Loading State -->
  <div class="loading" id="loading" role="status" aria-label="Carregando">
    <div class="loading-spinner"></div>
    <span class="sr-only">Carregando p√°gina de login...</span>
  </div>

  <!-- Main Content -->
  <main class="container" id="main-content">
    <!-- Logo Section -->
    <header class="logo">
      <h1 aria-label="Booktor - Plataforma de eBooks">
        <!-- Substitu√≠do emoji üìñ por SVG de livro -->
        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
          <path d="M4 19.5C4 18.837 4.263 18.201 4.732 17.732C5.201 17.263 5.837 17 6.5 17H20" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M6.5 2H20V22H6.5C5.837 22 5.201 21.737 4.732 21.268C4.263 20.799 4 20.163 4 19.5V4.5C4 3.837 4.263 3.201 4.732 2.732C5.201 2.263 5.837 2 6.5 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M9 7H16" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M9 11H16" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        Booktor
      </h1>
      <p>Sistema de Gerenciamento de Usu√°rios</p>
    </header>

    <!-- Tab Navigation -->
    <nav class="tabs" role="tablist" aria-label="Op√ß√µes de autentica√ß√£o">
      <button 
        class="tab active"
        data-tab="login"
        role="tab"
        aria-selected="true"
        aria-controls="loginForm"
        id="tab-login"
        tabindex="0"
      >
        Entrar
      </button>
      <button 
        class="tab"
        data-tab="register"
        role="tab"
        aria-selected="false"
        aria-controls="registerForm"
        id="tab-register"
        tabindex="-1"
      >
        Registrar
      </button>
    </nav>

    <!-- Login Form -->
    <section 
      id="loginForm"
      class="form-container"
      role="tabpanel"
      aria-labelledby="tab-login"
      aria-hidden="false"
    >
      <form novalidate aria-label="Formul√°rio de login">
        <div class="form-group">
          <label for="loginEmail">Email:</label>
          <input 
            type="email"
            id="loginEmail"
            class="form-input"
            placeholder="seu@email.com"
            required
            autocomplete="email"
            aria-describedby="email-error"
            aria-invalid="false"
          >
          <div id="email-error" class="error-message sr-only" role="alert"></div>
        </div>
        
        <div class="form-group" style="position: relative;">
          <label for="loginPassword">Senha:</label>
          <input 
            type="password"
            id="loginPassword"
            class="form-input"
            placeholder="Sua senha"
            required
            autocomplete="current-password"
            aria-describedby="password-error password-help"
            aria-invalid="false"
          >
          <button 
            type="button"
            class="password-toggle"
            onclick="togglePassword('loginPassword')"
            aria-label="Mostrar/Ocultar senha"
            title="Clique para mostrar ou ocultar a senha"
          >
            <!-- Substitu√≠do emoji üëÅÔ∏è por SVG de olho -->
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M1 12C1 12 5 4 12 4C19 4 23 12 23 12C23 12 19 20 12 20C5 20 1 12 1 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
          <div id="password-error" class="error-message sr-only" role="alert"></div>
          <div id="password-help" class="sr-only">Sua senha deve ter pelo menos 6 caracteres</div>
        </div>
        
        <button 
          type="button"
          class="btn" 
          id="loginBtn"
          aria-describedby="login-status"
        >
          Entrar
        </button>
        <div id="login-status" class="sr-only" role="status" aria-live="polite"></div>
      </form>
      
      <div class="divider" aria-hidden="true">
        <span>ou</span>
      </div>
      
      <button 
        class="google-btn"
        id="googleLoginBtn"
        aria-label="Entrar com conta do Google"
      >
        <svg width="20" height="20" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
          <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
          <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
          <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
          <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
        </svg>
        Entrar com Google
      </button>
      
      <div class="forgot-password">
        <a 
          href="#"
          id="forgotPasswordLink"
          aria-label="Recuperar senha esquecida"
        >
          Esqueceu sua senha?
        </a>
      </div>
    </section>

    <!-- Register Form -->
    <section 
      id="registerForm"
      class="form-container hidden"
      role="tabpanel"
      aria-labelledby="tab-register"
      aria-hidden="true"
    >
      <form novalidate aria-label="Formul√°rio de registro">
        <div class="form-group">
          <label for="registerName">Nome completo:</label>
          <input 
            type="text"
            id="registerName"
            class="form-input"
            placeholder="Seu nome completo"
            required
            autocomplete="name"
            aria-describedby="name-error"
            aria-invalid="false"
            minlength="2"
          >
          <div id="name-error" class="error-message sr-only" role="alert"></div>
        </div>
        
        <div class="form-group">
          <label for="registerEmail">Email:</label>
          <input 
            type="email"
            id="registerEmail"
            class="form-input"
            placeholder="seu@email.com"
            required
            autocomplete="email"
            aria-describedby="register-email-error"
            aria-invalid="false"
          >
          <div id="register-email-error" class="error-message sr-only" role="alert"></div>
        </div>
        
        <div class="form-group" style="position: relative;">
          <label for="registerPassword">Senha:</label>
          <input 
            type="password"
            id="registerPassword"
            class="form-input"
            placeholder="M√≠nimo 6 caracteres"
            required
            autocomplete="new-password"
            aria-describedby="register-password-error register-password-help"
            aria-invalid="false"
            minlength="6"
          >
          <button 
            type="button"
            class="password-toggle"
            onclick="togglePassword('registerPassword')"
            aria-label="Mostrar/Ocultar senha"
            title="Clique para mostrar ou ocultar a senha"
          >
            <!-- Substitu√≠do emoji üëÅÔ∏è por SVG de olho -->
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M1 12C1 12 5 4 12 4C19 4 23 12 23 12C23 12 19 20 12 20C5 20 1 12 1 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
          <div id="register-password-error" class="error-message sr-only" role="alert"></div>
          <div id="register-password-help" class="sr-only">A senha deve ter pelo menos 6 caracteres</div>
        </div>
        
        <div class="form-group" style="position: relative;">
          <label for="confirmPassword">Confirmar Senha:</label>
          <input 
            type="password"
            id="confirmPassword"
            class="form-input"
            placeholder="Confirme sua senha"
            required
            autocomplete="new-password"
            aria-describedby="confirm-password-error"
            aria-invalid="false"
          >
          <button 
            type="button"
            class="password-toggle"
            onclick="togglePassword('confirmPassword')"
            aria-label="Mostrar/Ocultar confirma√ß√£o de senha"
            title="Clique para mostrar ou ocultar a confirma√ß√£o da senha"
          >
            <!-- Substitu√≠do emoji üëÅÔ∏è por SVG de olho -->
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M1 12C1 12 5 4 12 4C19 4 23 12 23 12C23 12 19 20 12 20C5 20 1 12 1 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
          <div id="confirm-password-error" class="error-message sr-only" role="alert"></div>
        </div>
        
        <button 
          type="button"
          class="btn" 
          id="registerBtn"
          aria-describedby="register-status"
        >
          Registrar
        </button>
        <div id="register-status" class="sr-only" role="status" aria-live="polite"></div>
      </form>
      
      <div class="divider" aria-hidden="true">
        <span>ou</span>
      </div>
      
      <button 
        class="google-btn"
        id="googleRegisterBtn"
        aria-label="Registrar com conta do Google"
      >
        <svg width="20" height="20" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
          <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
          <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
          <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
          <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
        </svg>
        Registrar com Google
      </button>
    </section>

    <!-- Reset Password Form -->
    <section 
      id="resetPasswordForm"
      class="form-container hidden"
      role="form"
      aria-label="Formul√°rio de recupera√ß√£o de senha"
    >
      <form novalidate>
        <div class="form-group">
          <label for="resetEmail">Email para recupera√ß√£o:</label>
          <input 
            type="email"
            id="resetEmail"
            class="form-input"
            placeholder="seu@email.com"
            required
            autocomplete="email"
            aria-describedby="reset-email-error reset-email-help"
            aria-invalid="false"
          >
          <div id="reset-email-error" class="error-message sr-only" role="alert"></div>
          <div id="reset-email-help" class="sr-only">Enviaremos um link para redefinir sua senha</div>
        </div>
        
        <button 
          type="button"
          class="btn" 
          id="resetBtn"
          aria-describedby="reset-status"
        >
          Enviar Link de Recupera√ß√£o
        </button>
        <div id="reset-status" class="sr-only" role="status" aria-live="polite"></div>
      </form>
      
      <div class="forgot-password">
        <a 
          href="#"
          id="backToLoginLink"
          aria-label="Voltar para a p√°gina de login"
        >
          Voltar ao Login
        </a>
      </div>
    </section>
  </main>

  <!-- JavaScript - Carregado de forma ass√≠ncrona -->
  <script type="module" defer>
    // Firebase Configuration
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import {
      getAuth,
      signInWithEmailAndPassword,
      createUserWithEmailAndPassword,
      signInWithPopup,
      GoogleAuthProvider,
      sendPasswordResetEmail,
      updateProfile,
      onAuthStateChanged
    } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
    import {
      getDatabase,
      ref,
      set,
      serverTimestamp
    } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js";

    // Firebase Configuration
    const firebaseConfig = {
      apiKey: "AIzaSyBauGgt1pm-sBas75N40ufWRsGD6c4BsgM",
      authDomain: "sistema-de-login-blog.firebaseapp.com",
      databaseURL: "https://sistema-de-login-blog-default-rtdb.firebaseio.com",
      projectId: "sistema-de-login-blog",
      storageBucket: "sistema-de-login-blog.firebasestorage.app",
      messagingSenderId: "416120877008",
      appId: "1:416120877008:web:a5b0a26bec246d577a93d5"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const database = getDatabase(app);
    const provider = new GoogleAuthProvider();

    // DOM Elements
    const elements = {
      loading: document.getElementById('loading'),
      tabs: document.querySelectorAll('.tab'),
      forms: {
        login: document.getElementById('loginForm'),
        register: document.getElementById('registerForm'),
        reset: document.getElementById('resetPasswordForm')
      },
      buttons: {
        login: document.getElementById('loginBtn'),
        register: document.getElementById('registerBtn'),
        reset: document.getElementById('resetBtn'),
        googleLogin: document.getElementById('googleLoginBtn'),
        googleRegister: document.getElementById('googleRegisterBtn'),
        forgotPassword: document.getElementById('forgotPasswordLink'),
        backToLogin: document.getElementById('backToLoginLink')
      },
      inputs: {
        loginEmail: document.getElementById('loginEmail'),
        loginPassword: document.getElementById('loginPassword'),
        registerName: document.getElementById('registerName'),
        registerEmail: document.getElementById('registerEmail'),
        registerPassword: document.getElementById('registerPassword'),
        confirmPassword: document.getElementById('confirmPassword'),
        resetEmail: document.getElementById('resetEmail')
      }
    };

    // Utility Functions
    function showLoading() {
      elements.loading.classList.add('show');
      elements.loading.setAttribute('aria-hidden', 'false');
    }

    function hideLoading() {
      elements.loading.classList.remove('show');
      elements.loading.setAttribute('aria-hidden', 'true');
    }

    function showToast(message, type = 'info') {
      const toast = document.createElement('div');
      toast.className = `toast ${type}`;
      toast.textContent = message;
      toast.setAttribute('role', 'alert');
      toast.setAttribute('aria-live', 'assertive');
      document.body.appendChild(toast);
      
      setTimeout(() => toast.classList.add('show'), 100);
      
      setTimeout(() => {
        toast.classList.remove('show');
        setTimeout(() => toast.remove(), 300);
      }, 4000);
    }

    function validateEmail(email) {
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      return emailRegex.test(email);
    }

    function validatePassword(password) {
      return password.length >= 6;
    }

    function showError(inputElement, message) {
      const errorElement = document.getElementById(inputElement.getAttribute('aria-describedby').split(' ')[0]);
      if (errorElement) {
        errorElement.textContent = message;
        errorElement.classList.remove('sr-only');
        inputElement.setAttribute('aria-invalid', 'true');
      }
    }

    function clearError(inputElement) {
      const errorElement = document.getElementById(inputElement.getAttribute('aria-describedby').split(' ')[0]);
      if (errorElement) {
        errorElement.textContent = '';
        errorElement.classList.add('sr-only');
        inputElement.setAttribute('aria-invalid', 'false');
      }
    }

    // Password Toggle Function
    window.togglePassword = function(inputId) {
      const input = document.getElementById(inputId);
      const button = input.nextElementSibling;
      
      if (input.type === 'password') {
        input.type = 'text';
        button.setAttribute('aria-label', 'Ocultar senha');
        button.innerHTML = `
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M17.94 17.94C16.2 19.57 14.21 20.5 12 20.5C5 20.5 1 12.5 1 12.5C2.24 10.39 4.07 8.67 6.26 7.55" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M9.9 4.24C10.59 4.07 11.3 4 12 4C19 4 23 12 23 12C22.393 13.055 21.68 14.025 20.88 14.88" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M1 1L23 23" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        `;
      } else {
        input.type = 'password';
        button.setAttribute('aria-label', 'Mostrar senha');
        button.innerHTML = `
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M1 12C1 12 5 4 12 4C19 4 23 12 23 12C23 12 19 20 12 20C5 20 1 12 1 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        `;
      }
    };

    // Tab Navigation
    function switchTab(tabName) {
      elements.tabs.forEach(tab => {
        tab.classList.remove('active');
        tab.setAttribute('aria-selected', 'false');
        tab.setAttribute('tabindex', '-1');
      });
      
      Object.values(elements.forms).forEach(form => {
        form.classList.add('hidden');
        form.setAttribute('aria-hidden', 'true');
      });

      const activeTab = document.querySelector(`[data-tab="${tabName}"]`);
      const activeForm = elements.forms[tabName];
      
      if (activeTab && activeForm) {
        activeTab.classList.add('active');
        activeTab.setAttribute('aria-selected', 'true');
        activeTab.setAttribute('tabindex', '0');
        activeForm.classList.remove('hidden');
        activeForm.setAttribute('aria-hidden', 'false');
      }
    }

    // Event Listeners
    elements.tabs.forEach(tab => {
      tab.addEventListener('click', (e) => switchTab(e.target.dataset.tab));
      tab.addEventListener('keydown', (e) => {
        if (e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          switchTab(e.target.dataset.tab);
        }
      });
    });

    // Login Function
    elements.buttons.login.addEventListener('click', async () => {
      const email = elements.inputs.loginEmail.value;
      const password = elements.inputs.loginPassword.value;

      // Clear previous errors
      clearError(elements.inputs.loginEmail);
      clearError(elements.inputs.loginPassword);

      // Validation
      if (!email) {
        showError(elements.inputs.loginEmail, 'Email √© obrigat√≥rio');
        elements.inputs.loginEmail.focus();
        return;
      }

      if (!validateEmail(email)) {
        showError(elements.inputs.loginEmail, 'Email inv√°lido');
        elements.inputs.loginEmail.focus();
        return;
      }

      if (!password) {
        showError(elements.inputs.loginPassword, 'Senha √© obrigat√≥ria');
        elements.inputs.loginPassword.focus();
        return;
      }

      showLoading();

      try {
        const userCredential = await signInWithEmailAndPassword(auth, email, password);
        showToast('Login realizado com sucesso!', 'success');
        
        // Update status for screen readers
        document.getElementById('login-status').textContent = 'Login realizado com sucesso';
        
        setTimeout(() => {
          window.location.href = 'inicio.html';
        }, 1500);
      } catch (error) {
        hideLoading();
        console.error('Erro no login:', error);
        
        let errorMessage = 'Erro no login. Tente novamente.';
        if (error.code === 'auth/user-not-found') {
          errorMessage = 'Usu√°rio n√£o encontrado';
        } else if (error.code === 'auth/wrong-password') {
          errorMessage = 'Senha incorreta';
        }
        
        showToast(errorMessage, 'error');
        document.getElementById('login-status').textContent = errorMessage;
      }
    });

    // Register Function
    elements.buttons.register.addEventListener('click', async () => {
      const name = elements.inputs.registerName.value;
      const email = elements.inputs.registerEmail.value;
      const password = elements.inputs.registerPassword.value;
      const confirmPassword = elements.inputs.confirmPassword.value;

      // Clear previous errors
      clearError(elements.inputs.registerName);
      clearError(elements.inputs.registerEmail);
      clearError(elements.inputs.registerPassword);
      clearError(elements.inputs.confirmPassword);

      // Validation
      if (!name) {
        showError(elements.inputs.registerName, 'Nome √© obrigat√≥rio');
        elements.inputs.registerName.focus();
        return;
      }

      if (!email) {
        showError(elements.inputs.registerEmail, 'Email √© obrigat√≥rio');
        elements.inputs.registerEmail.focus();
        return;
      }

      if (!validateEmail(email)) {
        showError(elements.inputs.registerEmail, 'Email inv√°lido');
        elements.inputs.registerEmail.focus();
        return;
      }

      if (!password) {
        showError(elements.inputs.registerPassword, 'Senha √© obrigat√≥ria');
        elements.inputs.registerPassword.focus();
        return;
      }

      if (!validatePassword(password)) {
        showError(elements.inputs.registerPassword, 'Senha deve ter pelo menos 6 caracteres');
        elements.inputs.registerPassword.focus();
        return;
      }

      if (password !== confirmPassword) {
        showError(elements.inputs.confirmPassword, 'Senhas n√£o coincidem');
        elements.inputs.confirmPassword.focus();
        return;
      }

      showLoading();

      try {
        const userCredential = await createUserWithEmailAndPassword(auth, email, password);
        await updateProfile(userCredential.user, { displayName: name });
        
        // Save user data to database
        await set(ref(database, `users/${userCredential.user.uid}`), {
          uid: userCredential.user.uid,
          displayName: name,
          email: email,
          createdAt: serverTimestamp()
        });

        showToast('Conta criada com sucesso!', 'success');
        document.getElementById('register-status').textContent = 'Conta criada com sucesso';
        
        setTimeout(() => {
          window.location.href = 'inicio.html';
        }, 1500);
      } catch (error) {
        hideLoading();
        console.error('Erro no registro:', error);
        
        let errorMessage = 'Erro ao criar conta. Tente novamente.';
        if (error.code === 'auth/email-already-in-use') {
          errorMessage = 'Email j√° est√° em uso';
        } else if (error.code === 'auth/weak-password') {
          errorMessage = 'Senha muito fraca';
        }
        
        showToast(errorMessage, 'error');
        document.getElementById('register-status').textContent = errorMessage;
      }
    });

    // Google Auth
    [elements.buttons.googleLogin, elements.buttons.googleRegister].forEach(btn => {
      btn.addEventListener('click', async () => {
        showLoading();
        try {
          const result = await signInWithPopup(auth, provider);
          
          await set(ref(database, `users/${result.user.uid}`), {
            uid: result.user.uid,
            displayName: result.user.displayName,
            email: result.user.email,
            photoURL: result.user.photoURL,
            lastLogin: serverTimestamp()
          });

          showToast('Login com Google realizado com sucesso!', 'success');
          
          setTimeout(() => {
            window.location.href = 'inicio.html';
          }, 1500);
        } catch (error) {
          hideLoading();
          console.error('Erro no login com Google:', error);
          showToast('Erro no login com Google. Tente novamente.', 'error');
        }
      });
    });

    // Password Reset
    elements.buttons.reset.addEventListener('click', async () => {
      const email = elements.inputs.resetEmail.value;
      clearError(elements.inputs.resetEmail);

      if (!email) {
        showError(elements.inputs.resetEmail, 'Email √© obrigat√≥rio');
        elements.inputs.resetEmail.focus();
        return;
      }

      if (!validateEmail(email)) {
        showError(elements.inputs.resetEmail, 'Email inv√°lido');
        elements.inputs.resetEmail.focus();
        return;
      }

      showLoading();

      try {
        await sendPasswordResetEmail(auth, email);
        hideLoading();
        showToast('Link de recupera√ß√£o enviado!', 'success');
        document.getElementById('reset-status').textContent = 'Link de recupera√ß√£o enviado para seu email';
        
        setTimeout(() => switchTab('login'), 2000);
      } catch (error) {
        hideLoading();
        console.error('Erro ao enviar email de recupera√ß√£o:', error);
        showToast('Erro ao enviar email. Verifique o endere√ßo.', 'error');
        document.getElementById('reset-status').textContent = 'Erro ao enviar email de recupera√ß√£o';
      }
    });

    // Forgot Password Link
    elements.buttons.forgotPassword.addEventListener('click', (e) => {
      e.preventDefault();
      switchTab('reset');
    });

    // Back to Login Link
    elements.buttons.backToLogin.addEventListener('click', (e) => {
      e.preventDefault();
      switchTab('login');
    });

    // Create Particles
    function createParticles() {
      const particlesContainer = document.getElementById('particles');
      const particleCount = window.innerWidth < 768 ? 20 : 40;
      
      for (let i = 0; i < particleCount; i++) {
        const particle = document.createElement('div');
        particle.className = 'particle';
        particle.style.left = Math.random() * 100 + '%';
        particle.style.top = Math.random() * 100 + '%';
        particle.style.animationDelay = Math.random() * 6 + 's';
        particle.style.animationDuration = (Math.random() * 3 + 3) + 's';
        particlesContainer.appendChild(particle);
      }
    }

    // Auth State Observer
    onAuthStateChanged(auth, (user) => {
      if (user) {
        console.log('Usu√°rio j√° autenticado, redirecionando...');
        window.location.href = 'inicio.html';
      }
    });

    // Initialize
    document.addEventListener('DOMContentLoaded', () => {
      hideLoading();
      createParticles();
      
      // Show content after CSS loads
      document.body.style.opacity = '1';
      document.querySelector('.container').style.visibility = 'visible';
    });

    // Handle window resize for particles
    window.addEventListener('resize', () => {
      const particlesContainer = document.getElementById('particles');
      particlesContainer.innerHTML = '';
      createParticles();
    });

    // Form submission handling with Enter key
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Enter') {
        const activeForm = document.querySelector('.form-container:not(.hidden)');
        if (activeForm) {
          const submitBtn = activeForm.querySelector('.btn');
          if (submitBtn) {
            submitBtn.click();
          }
        }
      }
    });
  </script>
</body>
</html>
